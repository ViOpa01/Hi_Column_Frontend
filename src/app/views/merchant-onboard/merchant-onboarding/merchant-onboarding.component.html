<div class="col-lg-12 col-md-12">
    <div class="row">
        <div class="ml-2">
            <button *ngIf="!new && position == 'account_rel_manager'" type="button"
                class="btn btn-uc btn-sm waves-light" (click)="new = true; edit = false;" mdbWavesEffect>Add Merchant
            </button>
            <button *ngIf="new" type="button" class="btn btn-uc btn-sm waves-light"
                (click)="new = false; errors = {}; isNext = false;" mdbWavesEffect>Back
            </button>
        </div>
    </div>
    <div [ngClass]="{'card card-cascade narrower': true,'z-depth-0': !shadows,'mt-0': true}">
        <div *ngIf="!new">
            <div
                class="view view-cascade gradient-card-header blue-gradient narrower py-2 mt-4 mx-4 mb-3 d-flex justify-content-between align-items-center">


                <p class="white-text mx-3">MERCHANT ONBOARDING STATUS</p>

            </div>

            <div class="px-4">
                <div class="table-responsive table-wrapper">
                    <!--Table-->
                    <table class="table table-striped table-hover mb-0 border-space">

                        <!--Table head-->
                        <thead>
                            <tr>
                                <th class="th-md">S/N</th>
                                <th class="th-md">
                                    <a (click)="sortBy('merchant_id')">Merchant ID
                                        <i class="fa fa-sort ml-1"></i>
                                    </a>
                                </th>
                                <th class="th-md">
                                    <a (click)="sortBy('merchant_name')">Merchant Name
                                        <i class="fa fa-sort ml-1"></i>
                                    </a>
                                </th>
                                <th class="th-md">
                                    <a (click)="sortBy('merchant_address')">Merchant Address
                                        <i class="fa fa-sort ml-1"></i>
                                    </a>
                                </th>
                                <th class="th-md">
                                    <a (click)="sortBy('merchant_phone')">Merchant Phone
                                        <i class="fa fa-sort ml-1"></i>
                                    </a>
                                </th>
                                <th class="th-md">
                                    <a (click)="sortBy('merchant_email')">Merchant Email
                                        <i class="fa fa-sort ml-1"></i>
                                    </a>
                                </th>
                                <th class="th-md">
                                    <a (click)="sortBy('terminals_count')">No of Terminals
                                        <i class="fa fa-sort ml-1"></i>
                                    </a>
                                </th>
                                <th class="th-md text-center">Approval Stage</th>
                                <th class="th-md text-center">Action</th>
                            </tr>
                        </thead>
                        <!--Table head-->

                        <!--Table body-->
                        <tbody *ngIf="merchants.length > 0">
                            <tr  *ngFor="let row of merchants;let i = index;">

                                <td>{{(serial + i)}}</td>
                                <td>{{row.merchant_id || 'Not Set'}}</td>
                                <td>{{row.merchant_name}}</td>
                                <td>{{row.merchant_address}}</td>
                                <td>{{row.merchant_phone}}</td>
                                <td>{{row.merchant_email}}</td>
                                <td>{{row.terminals_count}}</td>
                                <td>{{approval_stages[row.approval_level + 1]}}</td>
                                <td class="text-center">
                                    <button *ngIf="!row.profile_compliance && position == 'account_rel_manager'"
                                        class="btn btn-elegant waves-light btn-sm m-0 mr-3"
                                        (click)="id = row._id; setDetails(row); openView()" mdbWavesEffect>Edit</button>

                                    <button *ngIf="position == 'head_office' && row.approval_level >= approval_position && (!row.merchant_id || row.assigned_term_count < row.terminals_count)" class="btn btn-elegant waves-light btn-sm m-0 mr-3"
                                        (click)="id = row._id; setDetails(row); terminal_details = row.terminals; merchantModal.show()"
                                        mdbWavesEffect>Assign IDs</button>
 
                                    <button class="btn btn-elegant waves-light btn-sm m-0"
                                        (click)="setDetails(row); basicModal.show()" mdbWavesEffect>View</button>

                                    <button
                                        *ngIf="position != 'account_rel_manager' && row.approval_level < approval_position && row.profile_compliance"
                                        class="btn btn-success waves-light btn-sm m-0 ml-3" (click)="approve(row._id)"
                                        mdbWavesEffect>Approve</button>
                                    <button
                                        *ngIf="position != 'account_rel_manager' && row.approval_level < approval_position && row.profile_compliance"
                                        class="btn btn-danger waves-light btn-sm m-0 ml-3" (click)="reject(row._id)"
                                        mdbWavesEffect>Reject</button>
                                </td>
                            </tr>
                        </tbody>

                        <!--Table body-->
                        <tbody *ngIf="isData == false; else gettingData">
                            <tr >
                                <td colspan="10" style="text-align:center;padding: 5% 20%">
                                    <strong>No Data Available</strong>
                                </td>
                            </tr>
                        </tbody>
                        <ng-template #gettingData>
                            <tbody *ngIf="isData == undefined">
                                <tr >
                                    <td colspan="10" style="text-align:center;padding: 5% 20%">
                                        <mdb-spinner spinnerColor="blue"></mdb-spinner>
                                    </td>
                                </tr>
                            </tbody>
                        </ng-template>

                    </table>
                    <!--Table-->
                </div>

                <hr class="my-0">

                <app-pagination *ngIf="page" [event]="'OnboardingPage'" [page]=page></app-pagination>
            </div>
            <div mdbModal #merchantModal="mdbModal" class="modal fade size2" style=" overflow: auto" tabindex="-1"
                role="dialog" aria-labelledby="myMerchantLabel" aria-hidden="true"
                [config]="{backdrop: true, ignoreBackdropClick: false}">
                <div class="modal-dialog modal-dialog-scrollable modal-fluid" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title w-100" id="myModalLabel">Provide IDs</h4>
                            <button type="button" class="close unset-close" aria-label="Close" data-dismiss="modal"
                                (click)="merchantModal.hide(); attach = false" mdbWavesEffect>x</button>
                        </div>
                        <div class="modal-body">
                            <div class="px-4">
                                <div *ngIf="!check2()" class="row">
                                    <input *ngIf="!(details||{}).merchant_id || check2()"
                                        class="form-control my-0 py-0 col-lg-11 col-sm-7"
                                        [ngModelOptions]="{standalone: true}" ngDefaultControl [(ngModel)]="merchant_id"
                                        placeholder="Merchant ID" name="merchant_id" type="text" />
                                    <button *ngIf="!(details||{}).merchant_id  || check2()" class="btn btn-uc btn-sm"
                                        (click)="setMerchant(id)"
                                        [disabled]="isSave[3] || !merchant_id">{{isSave[3] ? 'Adding' : 'Add' }}<i
                                            class="fa "
                                            [ngClass]="{'spinner-border spinner-border-sm':isSave[3]==true}"></i></button>

                                </div>
                                <hr *ngIf="!check2()">

                                <h5 class="mb-0 mt-3"><strong>Terminal Information</strong></h5>
                                <div class="table-responsive table-wrapper py-0">
                                    <!--Table-->
                                    <table class="table table-striped table-hover mb-0 another-style border-space">

                                        <!--Table head-->
                                        <thead>
                                            <tr>
                                                <th class="th-md">S/N</th>
                                                <th class="th-md">Location</th>
                                                <th class="th-md">Contact Name</th>
                                                <th class="th-md">Contact Phone</th>
                                                <th class="th-md">No of Terminals</th>
                                                <th class="th-md">Attach TID</th>

                                            </tr>
                                        </thead>
                                        <!--Table head-->

                                        <!--Table body-->
                                        <tbody *ngIf="!attach">
                                            <tr  *ngFor="let row of terminal_details;let i = index;">

                                                <td>{{i + 1}}</td>
                                                <td>{{row.location}}</td>
                                                <td>{{row.contact_name}}</td>
                                                <td>{{row.contact_phone }}</td>
                                                <td>{{row.count | number : '1.0'}}</td>
                                                <td><button [disabled]="merch_details[i].isMap == true"
                                                        class="btn btn-elegant waves-light btn-sm m-0"
                                                        (click)="check(); terminal_index = i;"
                                                        mdbWavesEffect>Attach</button></td>
                                            </tr>
                                        </tbody>

                                        <tbody>
                                            <tr  *ngIf="attach">

                                                <td>1</td>
                                                <td>{{(terminal_details[terminal_index]||{}).location}}</td>
                                                <td>{{(terminal_details[terminal_index]||{}).contact_name}}</td>
                                                <td>{{(terminal_details[terminal_index]||{}).contact_phone }}</td>
                                                <td>{{(terminal_details[terminal_index]||{}).count | number : '1.0'}}
                                                </td>
                                                <td>

                                                    <button class="btn btn-elegant waves-light btn-sm m-0"
                                                        (click)="terminal_index = NaN; attach = false; merchant_id = ''"
                                                        mdbWavesEffect>Close</button></td>
                                            </tr>
                                        </tbody>

                                    </table>

                                </div>

                                <div *ngIf="attach">

                                    <app-terminal-inventory [merchant]="details.merchant_id"
                                        [count]="(terminal_details[terminal_index]||{}).count" [show]="true">
                                    </app-terminal-inventory>

                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-uc btn-sm waves-light mt-3" aria-label="Close"
                                data-dismiss="modal" (click)="merchantModal.hide(); attach = false"
                                mdbWavesEffect>Close</button>
                        </div>
                    </div>
                </div>
            </div>

            <div mdbModal #basicModal="mdbModal" class="modal fade size" style=" overflow: auto" tabindex="-1"
                role="dialog" aria-labelledby="myBasicModalLabel" aria-hidden="true"
                [config]="{backdrop: true, ignoreBackdropClick: false}">
                <div class="modal-dialog modal-dialog-scrollable modal-fluid" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title w-100" id="myModalLabel">Merchant Details</h4>
                            <button type="button" class="close unset-close" aria-label="Close" data-dismiss="modal"
                                (click)="basicModal.hide()" mdbWavesEffect>x</button>
                        </div>
                        <div class="modal-body">
                            <div class="table-responsive px-4">
                                <table class="table table-striped table-hover mb-0 new-table-style">

                                    <!--Table body-->
                                    <tbody *ngIf="details">
                                        <tr *ngIf="details.merchant_id">
                                            <th>Merchant ID</th>
                                            <td>{{details.merchant_id}}</td>
                                        </tr>
                                        <tr>
                                            <th>Merchant Name</th>
                                            <td>{{details.merchant_name}}</td>
                                        </tr>
                                        <tr>
                                            <th>RC Number</th>
                                            <td>{{details.rc_number}}</td>
                                        </tr>
                                        <tr>
                                            <th>Merchant Address</th>
                                            <td>{{details.merchant_address}}</td>
                                        </tr>
                                        <tr>
                                            <th>Merchant Phone</th>
                                            <td>{{details.merchant_phone}}</td>
                                        </tr>
                                        <tr>
                                            <th>Merchant Email</th>
                                            <td>{{details.merchant_email}}</td>
                                        </tr>
                                        <tr>
                                            <th>No of Terminals</th>
                                            <td>{{details.terminals_count | number : '1.0'}}</td>
                                        </tr>
                                        <tr>
                                            <th>Terminal Information</th>
                                            <td>
                                                <div class="table-responsive table-wrapper py-0">
                                                    <!--Table-->
                                                    <table
                                                        class="table table-striped table-hover mb-0 another-style border-space">

                                                        <!--Table head-->
                                                        <thead>
                                                            <tr>
                                                                <th class="th-md">S/N</th>
                                                                <th class="th-md">Location</th>
                                                                <th class="th-md">Contact Name</th>
                                                                <th class="th-md">Contact Phone</th>
                                                                <th class="th-md">No of Terminals</th>

                                                            </tr>
                                                        </thead>
                                                        <!--Table head-->

                                                        <!--Table body-->
                                                        <tbody>
                                                            <tr *ngFor="let row of details.terminals;let i = index;">

                                                                <td>{{i + 1}}</td>
                                                                <td>{{row.location}}</td>
                                                                <td>{{row.contact_name}}</td>
                                                                <td>{{row.contact_phone }}</td>
                                                                <td>{{row.count | number : '1.0'}}</td>
                                                            </tr>
                                                        </tbody>

                                                    </table>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>Account Name</th>
                                            <td>{{details.merchant_account_name}}</td>
                                        </tr>
                                        <tr>
                                            <th>Account Number</th>
                                            <td>{{details.merchant_account_nr}}</td>
                                        </tr>
                                        <tr>
                                            <th>Account Type</th>
                                            <td>{{details.merchant_account_type}}</td>
                                        </tr>
                                        <tr>
                                            <th>Bank Branch</th>
                                            <td>{{details.merchant_bank_branch}}</td>
                                        </tr>
                                        <tr>
                                            <th>Merchant Contacts</th>
                                            <td>
                                                <div class="table-responsive table-wrapper">
                                                    <!--Table-->
                                                    <table
                                                        class="table table-striped table-hover mb-0 another-style border-space">

                                                        <!--Table head-->
                                                        <thead>
                                                            <tr>
                                                                <th class="th-md">S/N</th>
                                                                <th class="th-md">Contact Name</th>
                                                                <th class="th-md">Contact Designation</th>
                                                                <th class="th-md">Contact Phone/Tel</th>
                                                                <th class="th-md">Conatct Email</th>

                                                            </tr>
                                                        </thead>
                                                        <!--Table head-->

                                                        <!--Table body-->
                                                        <tbody>
                                                            <tr
                                                                *ngFor="let contact of details.merchant_contacts;let i = index;">

                                                                <td>{{i + 1}}</td>
                                                                <td>{{contact.contact_name}}</td>
                                                                <td>{{contact.contact_designation}}</td>
                                                                <td>{{contact.contact_phone + (contact_tel ? (', '+contact_tel) : '')}}
                                                                </td>
                                                                <td>{{contact.contact_email}}</td>
                                                            </tr>
                                                        </tbody>

                                                    </table>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>Product/Services Description</th>
                                            <td>{{details.merchant_description}}</td>
                                        </tr>
                                        <tr>
                                            <th>Industry</th>
                                            <td>{{details.business_industry}}</td>
                                        </tr>
                                        <tr>
                                            <th>Referral</th>
                                            <td>{{details.merchant_referral}}</td>
                                        </tr>
                                        <tr>
                                            <th>Opening Hours</th>
                                            <td>{{details.opening_hours}}</td>
                                        </tr>
                                        <tr>
                                            <th>Price Range (&#8358;)</th>
                                            <td>{{details.price_ranges}}</td>
                                        </tr>
                                        <tr *ngIf="details.profile_compliance">
                                            <th>USSD Code</th>
                                            <td>{{details.ussd_code}}</td>
                                        </tr>
                                        <tr *ngIf="details.profile_compliance">
                                            <th>MSC Rate</th>
                                            <td>{{details.msc_rate}}</td>
                                        </tr>
                                        <tr *ngIf="details.profile_compliance">
                                            <th>Upper Limit (₦)</th>
                                            <td>{{details.upperlimit | number: '1.2-2' }}</td>
                                        </tr>
                                        <tr *ngIf="details.profile_compliance">
                                            <th>Settlement Cycle</th>
                                            <td>{{details.settlement_cycle}}</td>
                                        </tr>

                                        <tr *ngIf="details.profile_compliance">
                                            <th>Profile Compliance</th>
                                            <td>
                                                <div class="table-responsive table-wrapper">
                                                    <!--Table-->
                                                    <table
                                                        class="table table-striped table-hover mb-0 another-style border-space">

                                                        <!--Table head-->
                                                        <thead>
                                                            <tr>
                                                                <th title="Background check on prospective merchants and Principal Shareholders / Key Officers"
                                                                    class="th-md">Background Check</th>
                                                                <th title="Credit check, Background Investigations and Reference checks of merchant"
                                                                    class="th-md">Credit Check</th>
                                                                <th title="Physical Inspection of Premises and Records"
                                                                    class="th-md">Physical Inspection</th>
                                                                <th title="Investigate into the merchants previous POS agreements"
                                                                    class="th-md">Previous POS Aggrement</th>

                                                            </tr>
                                                        </thead>
                                                        <!--Table head-->

                                                        <!--Table body-->
                                                        <tbody>
                                                            <tr>

                                                                <td>{{details.profile_compliance.background_check}}</td>
                                                                <td>{{details.profile_compliance.credit_check}}</td>
                                                                <td>{{details.profile_compliance.physical_inspection}}
                                                                </td>
                                                                <td>{{details.profile_compliance.previous_agreement}}
                                                                </td>
                                                            </tr>
                                                        </tbody>

                                                    </table>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>

                                </table>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-uc btn-sm waves-light" aria-label="Close"
                                data-dismiss="modal" (click)="basicModal.hide()" mdbWavesEffect>Close</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <form *ngIf="new" [formGroup]="reactiveForm">
            <div class="mt-3 px-4 mb-2" *ngIf="!next && !next2"
                (input)="getContacts(); getIndustries(); checkFirstPage(false);">
                <p class="mb-0 style-new">Add Merchant</p>
                <hr>
                <div class="table-responsive px-4">
                    <h5 class="mb-0"><strong>Merchant Information</strong></h5>
                    <table class="table table-borderless">
                        <tr class="row mx-0 no-change">
                            <td class="col-lg-6">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="company_name" placeholder="Name of Merchant/Company"
                                    name="company_name" type="text" />
                                <span class="text-danger">{{errors.merchant_name}}</span>
                            </td>
                            <td class="col-lg-6">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="rc_number" placeholder="RC Number" name="rc_number"
                                    type="text" />
                                <span class="text-danger">{{errors.rc_number}}</span>
                            </td>
                            <td class="col-lg-6">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="name_address" placeholder="Address"
                                    name="name_address" type="text" />
                                <span class="text-danger">{{errors.name_address}}</span>
                            </td>
                            <td class="col-lg-6">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="merchant_phone" placeholder="Phone Number"
                                    name="merchant_phone" type="text" />
                                <span *ngIf="errors.merchant_phone" class="text-danger">
                                    {{ errors.merchant_phone }}
                                </span>
                            </td>
                            <td class="col-lg-6">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="merchant_email" placeholder="Email"
                                    name="merchant_email" type="email" />
                                <span *ngIf="errors.merchant_email" class="text-danger">
                                    {{ errors.merchant_email }}
                                </span>
                            </td>
                        </tr>
                    </table>
                </div>

                <div class="table-responsive px-4 mt-3">
                    <h5 class="mb-0"><strong>Business Segment/ Industry</strong></h5>
                    <table class="table table-borderless">
                        <tr class="row mx-0 no-change">
                            <td *ngFor="let item of business" class="col-lg-3 row">
                                <p class="bold-look">{{item.value}} ({{item.mcc}})</p>
                                <mdb-checkbox [formControlName]="item.name"></mdb-checkbox>
                            </td>
                            <td class="col-lg-12 row">
                                <p class="bold-look2 mr-3">Others ({{others_mcc}}) </p>
                                <input class="form-control my-0 py-0 col-lg-5" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="others" placeholder="" name="others" type="text" />
                            </td>
                            <span class="text-danger">{{errors.industry}}</span>
                        </tr>
                    </table>
                </div>

                <div class="table-responsive px-4 mt-3">
                    <h5 class="mb-0"><strong>Contact Information</strong></h5>
                    <table *ngFor="let i of [0,1]" class="table table-borderless">
                        <tr class="row mx-0 no-change">
                            <td class="col-lg-6">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="contact_name[i]" placeholder="Name of Contact"
                                    type="text" />
                                <span *ngIf="errors.contact_name" class="text-danger">{{errors.contact_name[i]}}</span>
                            </td>

                            <td class="col-lg-6">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="contact_designation[i]" placeholder="Designation"
                                    type="text" />
                                <span *ngIf="errors.contact_designation"
                                    class="text-danger">{{errors.contact_designation[i]}}</span>
                            </td>
                            <td class="col-lg-6">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="contact_office_phone[i]"
                                    placeholder="Office Telephone/ Extension" type="text" />
                            </td>
                            <td class="col-lg-6">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="contact_mobile[i]" placeholder="Mobile Number"
                                    type="text" />
                                <span *ngIf="(errors.contact_mobile||{})[i]" class="text-danger">
                                    {{ (errors.contact_mobile||{})[i] }}
                                </span>
                            </td>
                            <td class="col-lg-6">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="contact_email[i]" placeholder="Email" type="email" />
                                <span *ngIf="(errors.contact_email||{})[i]" class="text-danger">
                                    {{ (errors.contact_email||{})[i] }}
                                </span>
                            </td>
                        </tr>
                    </table>
                    <span class="text-danger">{{errors.merchant_contacts}}</span>
                </div>

                <div class="px-4 mb-1">
                    <a class="btn btn-uc btn-sm waves-light text-white pull-right"
                        (click)="getIndustries(); getContacts(); isNext = true; checkFirstPage();">Next</a>
                </div>
            </div>

            <div class="mt-3 px-4 mb-2" *ngIf="next && !next2" (input)="checkSecondPage(false);">
                <p class="mb-0 style-new">Add Merchant</p>
                <hr>
                <div class="table-responsive px-4">
                    <h5 class="mb-0"><strong>Business Information</strong></h5>
                    <table class="table table-borderless">
                        <tr class="row mx-0 no-change">
                            <td class="col-lg-12 row">
                                <p class="bold-look2 mr-3 bold-look-w">Products, Goods and Service Offerings
                                </p>
                                <textarea class="col-lg-10 form-control" rows="8" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="products" placeholder="" name="products"></textarea>
                                <span class="text-danger">{{errors.products}}</span>
                            </td>
                            <td class="col-lg-12 row">
                                <p class="bold-look2 mr-3 bold-look-w">Number of POS Terminals Required</p>
                                <input class="form-control my-0 py-0 col-lg-6" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="terminal_number" placeholder="" name="terminal_number"
                                    type="number" />
                            </td>
                            <td class="col-lg-12" *ngIf="error">
                                <span class="text-danger">{{errors.terminal_number}}</span>
                            </td>
                            <td class="col-lg-12">
                                <p class="bold-look2">Business Opening Hours</p>
                            </td>
                            <td class="col-lg-2">
                                <div class="form-check row p-0">
                                    <span class="bold-look2 text-g noWrap">8:00am - 9:00pm</span>
                                    <input (change)="time = '8:00am - 9:00pm'" type="radio" class="form-check-input"
                                        id="materialUnchecked2" name="time">
                                    <label class="form-check-label v-m" for="materialUnchecked2"></label>
                                </div>
                            </td>
                            <td class="col-lg-2">
                                <div class="form-check row p-0">
                                    <span class="bold-look2 text-g noWrap">8:00pm - 8:00am</span>
                                    <input (change)="time = '8:00pm - 8:00am'" type="radio" class="form-check-input"
                                        id="materialUnchecked3" name="time" mdbInputDirective>
                                    <label class="form-check-label v-m" for="materialUnchecked3"></label>
                                </div>
                            </td>
                            <td class="col-lg-2">
                                <div class="form-check row p-0">
                                    <span class="bold-look2 text-g noWrap">All Day</span>
                                    <input (change)="time = 'All Day'" type="radio" class="form-check-input"
                                        id="materialUnchecked4" name="time" mdbInputDirective>
                                    <label class="form-check-label v-m" for="materialUnchecked4"></label>
                                </div>
                            </td>
                            <td class="col-lg-12" *ngIf="error">
                                <span class="text-danger">{{errors.time}}</span>
                            </td>
                            <td class="col-lg-12">
                                <p class="bold-look2">Price Range of Items (₦)</p>
                            </td>
                            <td class="col-lg-2">
                                <div class="form-check row p-0">
                                    <span class="bold-look2 text-g noWrap">0 - 5000</span>
                                    <input type="radio" (change)="amount = '0-5000'" class="form-check-input"
                                        id="materialUnchecked5" name="amount" mdbInputDirective>
                                    <label class="form-check-label v-m" for="materialUnchecked5"></label>
                                </div>
                            </td>
                            <td class="col-lg-2">
                                <div class="form-check row p-0">
                                    <span class="bold-look2 text-g noWrap">0 - 10000</span>
                                    <input type="radio" (change)="amount = '0 - 10000'" class="form-check-input"
                                        id="materialUnchecked6" name="amount" mdbInputDirective>
                                    <label class="form-check-label v-m" for="materialUnchecked6"></label>
                                </div>
                            </td>
                            <td class="col-lg-2">
                                <div class="form-check row p-0">
                                    <span class="bold-look2 text-g noWrap">0 - 15000</span>
                                    <input type="radio" (change)="amount = '0 - 15000'" class="form-check-input"
                                        id="materialUnchecked7" name="amount" mdbInputDirective>
                                    <label class="form-check-label v-m" for="materialUnchecked7"></label>
                                </div>
                            </td>
                            <td class="col-lg-2">
                                <div class="form-check row p-0">
                                    <span class="bold-look2 text-g noWrap">0 - 20000</span>
                                    <input type="radio" (change)="amount = '0 - 20000'" class="form-check-input"
                                        id="materialUnchecked8" name="amount" mdbInputDirective>
                                    <label class="form-check-label v-m" for="materialUnchecked8"></label>
                                </div>
                            </td>
                            <td class="col-lg-12" *ngIf="error">
                                <span class="text-danger">{{errors.amount}}</span>
                            </td>
                        </tr>
                    </table>
                </div>

                <div class="table-responsive px-4 mt-3">
                    <h5 class="mb-0"><strong>POS Terminal Information</strong></h5>
                    <span class="text-danger">{{error_size}}</span>
                    <table class="table table-borderless">
                        <tr class="row mx-0 no-change">
                            <td class="col-lg-6">
                                <input [disabled]="!terminal_number" class="form-control my-0 py-0"
                                    [ngModelOptions]="{standalone: true}" ngDefaultControl
                                    [(ngModel)]="terminal_location" placeholder="Location of Terminal (Address)"
                                    name="terminal_location" type="text" />
                            </td>
                            <td class="col-lg-6">
                                <input [disabled]="!terminal_number" class="form-control my-0 py-0"
                                    [ngModelOptions]="{standalone: true}" ngDefaultControl [(ngModel)]="contact_person"
                                    placeholder="Contact Person responsible for Terminal " name="contact_person"
                                    type="text" />
                            </td>
                            <td class="col-lg-6">
                                <input [disabled]="!terminal_number" class="form-control my-0 py-0"
                                    [ngModelOptions]="{standalone: true}" ngDefaultControl [(ngModel)]="phone_number"
                                    placeholder="Phone Number" name="phone_number" type="text"
                                    pattern="^(0|234|\+234)[0-9]{10}$"
                                    (input)="error = name.errors && name.errors.pattern; addMoreError = name.errors && name.errors.pattern;"
                                    #name="ngModel" />
                                <span *ngIf="(name.errors && name.errors.pattern)" class="text-danger">
                                    {{ name.errors && name.errors.pattern ? 'Invalid Phone Format' : "" }}
                                </span>

                            </td>
                            <td class="col-lg-4">
                                <input [disabled]="!terminal_number" class="form-control my-0 py-0"
                                    [ngModelOptions]="{standalone: true}" ngDefaultControl [(ngModel)]="POS_number"
                                    placeholder="No of POS to be at location" name="POS_number" type="number" />
                            </td>
                            <td class="mt-1">
                                <a class="new-style" (click)="isMore = true; addMore(); getTerminals();" mdbWavesEffect>
                                    <mdb-icon fas icon="plus"></mdb-icon>
                                </a>
                            </td>
                            <td class="col-lg-12" *ngIf="error">
                                <span class="text-danger">{{errors.terminals}}</span>
                            </td>
                        </tr>
                    </table>
                    <table *ngIf="isMore && organisedArray.length" class="table no-header border-space">
                        <thead>
                            <tr>
                                <th>Terminal Location (Address)</th>
                                <th>Contact Person</th>
                                <th>Phone Number</th>
                                <th>No of POS</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let row of organisedArray; let i = index">
                                <td>{{row.terminal_location}}</td>
                                <td>{{row.contact_person}}</td>
                                <td>{{row.phone_number}}</td>
                                <td>{{row.POS_number}}</td>
                                <td><button class="btn btn-sm btn-ud waves-light m-0"
                                        (click)="delete(i)">Delete</button></td>
                            </tr>
                        </tbody>

                    </table>
                </div>

                <div class="table-responsive px-4 mt-3">
                    <h5 class="mb-0"><strong>Bank Account Information</strong></h5>
                    <table class="table table-borderless">
                        <tr class="row mx-0 no-change">
                            <td class="col-lg-12">
                                <p class="bold-look2">Account Type</p>
                            </td>
                            <td class="col-lg-2">
                                <div class="form-check row p-0">
                                    <span class="bold-look2 text-g noWrap">Current Account</span>
                                    <input type="radio" (change)="account = 'current'" class="form-check-input"
                                        id="materialUnchecked9" name="account" mdbInputDirective>
                                    <label class="form-check-label v-m" for="materialUnchecked9"></label>
                                </div>
                            </td>
                            <td class="col-lg-2 mr-32">
                                <div class="form-check row p-0">
                                    <span class="bold-look2 text-g noWrap">Savings Account</span>
                                    <input type="radio" (change)="account = 'savings'" class="form-check-input"
                                        id="materialUnchecked10" name="account" mdbInputDirective>
                                    <label class="form-check-label v-m" for="materialUnchecked10"></label>
                                </div>
                            </td>
                            <td class="col-lg-12" *ngIf="error">
                                <span class="text-danger">{{errors.account}}</span>
                            </td>
                            <td class="col-lg-6">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="branch" placeholder="Branch" name="branch"
                                    type="text" />
                                <span class="text-danger">{{errors.branch}}</span>

                            </td>
                            <td class="col-lg-6">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="bvn" placeholder="BVN" name="bvn" type="text" />
                                <span class="text-danger">{{errors.bvn}}</span>
                            </td>
                            <td class="col-lg-6">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="account_name" placeholder="Account Name"
                                    name="account_name" type="text" />
                                <span class="text-danger">{{errors.account_name}}</span>
                            </td>
                            <td class="col-lg-6">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="account_number" placeholder="Account Number"
                                    name="account_number" type="text" />
                                <span class="text-danger">{{errors.account_number}}</span>
                            </td>

                            <td class="col-lg-12">
                                <p class="bold-look2">SMS Alerts on POS Transactions</p>
                            </td>
                            <td class="col-lg-2">
                                <div class="form-check row p-0">
                                    <span class="bold-look2 text-g">Yes</span>
                                    <input type="radio" (change)="alert = 'yes'" class="form-check-input"
                                        id="materialUnchecked11" name="alert" mdbInputDirective>
                                    <label class="form-check-label v-m" for="materialUnchecked11"></label>
                                </div>
                            </td>
                            <td class="col-lg-2">
                                <div class="form-check row p-0">
                                    <span class="bold-look2 text-g">No</span>
                                    <input type="radio" (change)="alert = 'no'" class="form-check-input"
                                        id="materialUnchecked12" name="alert" mdbInputDirective>
                                    <label class="form-check-label v-m" for="materialUnchecked12"></label>
                                </div>
                            </td>
                            <td class="col-lg-12" *ngIf="error">
                                <span class="text-danger">{{errors.alert}}</span>
                            </td>

                        </tr>
                    </table>
                </div>
                <div class="px-4 row mb-1 pull-right">
                    <a class="btn btn-uc btn-sm waves-light text-white ml-2" [disabled]="isSave[0]"
                        (click)="next = false; errors = {}; isNext = false;">Back</a>
                    <button class="btn btn-uc btn-sm" (click)="getTerminals(); isNext = true; checkSecondPage();"
                        [disabled]="isSave[0]">{{isSave[0] ? 'Adding' : 'Add' }}<i class="fa "
                            [ngClass]="{'spinner-border spinner-border-sm':isSave[0]==true}"></i></button>
                </div>

            </div>

            <div class="mt-3 px-4 mb-2" *ngIf="(next && next2)" (input)="getCompliance(); checkThirdPage();">
                <p class="mb-0 style-new">Add Merchant</p>
                <hr>
                <div class="table-responsive px-4">
                    <h5 class="mb-0"><strong>Official Bank Use</strong></h5>
                    <table class="table table-borderless">
                        <tr class="row mx-0 no-change">
                            <td class="col-lg-4">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="ussd" placeholder="USSD Code" name="ussd"
                                    type="text" />
                                <span class="text-danger">{{errors.ussd}}</span>
                            </td>
                            <td class="col-lg-4">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="business_code" placeholder="Business Occupation Code"
                                    name="business_code" type="text" />
                                <span class="text-danger">{{errors.business_code}}</span>
                            </td>
                            <td class="col-lg-4">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="pan_account" placeholder="PAN Account Number"
                                    name="pan_account" type="text" />
                                <span class="text-danger">{{errors.pan_account}}</span>
                            </td>
                            <td class="col-lg-4">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="msc_rate" placeholder="MSC Rate" name="msc_rate"
                                    type="number" />
                                <span class="text-danger">{{errors.msc_rate}}</span>
                            </td>
                            <td class="col-lg-4">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="upperlimit" placeholder="Upper Limit"
                                    name="upperlimit" type="number" />
                                <span class="text-danger">{{errors.upperlimit}}</span>
                            </td>
                            <td class="col-lg-4">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="settlement_cycle" placeholder="Settlement Cycle"
                                    name="settlement_cycle" type="number" />
                                <span class="text-danger">{{errors.settlement_cycle}}</span>
                            </td>
                        </tr>
                    </table>
                </div>

                <div class="table-responsive px-4 mt-3">
                    <h5 class="mb-0"><strong>Staff Who Won Merchant Mandate</strong></h5>
                    <table class="table table-borderless">
                        <tr class="row mx-0 no-change">
                            <td class="col-lg-6">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="staff_name" placeholder="Name of Staff"
                                    name="staff_name" type="text" />
                                <span class="text-danger">{{errors.staff_name}}</span>
                            </td>
                            <td class="col-lg-6">
                                <input class="form-control my-0 py-0" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="staff_id" placeholder="ID of Staff" name="staff_id"
                                    type="text" />
                                <span class="text-danger">{{errors.staff_id}}</span>
                            </td>
                        </tr>
                    </table>
                </div>

                <div class="table-responsive px-4 mt-3">
                    <h5 class="mb-0"><strong>Risk Profile Compliance</strong></h5>
                    <table class="table table-borderless">
                        <tr class="row mx-0 no-change">
                            <td *ngFor="let item of compliance; let i = index" class="col-lg-12 row">
                                <div class="col-lg-6">
                                    <p class="bold-look3 d-inline-block mr-3" style="width: 643pox">{{item.value}}</p>
                                    <mdb-checkbox style="vertical-align: top;" class="d-inline-block"
                                        [formControlName]="item.name"></mdb-checkbox>
                                </div>

                                <textarea class="col-lg-6 form-control" rows="8" [ngModelOptions]="{standalone: true}"
                                    ngDefaultControl [(ngModel)]="item.value2" placeholder="Comment"
                                    name="item.name"></textarea>
                                <span *ngIf="errors.compliance" class="text-danger">{{errors.compliance[i]}}</span>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="px-4 row pull-right mb-1">
                    <!-- <a *ngIf="!edit" class="btn btn-uc btn-sm waves-light text-white ml-2"
                        (click)="next = true; next2 = false; errors = {}; isNext = false;">Back</a> -->
                    <button class="btn btn-uc btn-sm" (click)="getCompliance(); isNext = true; checkThirdPage();"
                        [disabled]="isSave[1]">{{isSave[1] ? 'Saving' : 'Next' }}<i class="fa "
                            [ngClass]="{'spinner-border spinner-border-sm':isSave[1]==true}"></i></button>
                </div>
            </div>
        </form>
    </div>
</div>